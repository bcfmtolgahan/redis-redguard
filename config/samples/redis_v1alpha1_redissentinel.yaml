apiVersion: redis.redguard.io/v1alpha1
kind: RedisSentinel
metadata:
  name: redis-cluster
  namespace: default
spec:
  redisConfig:
    replicas: 3
    image: redis:7-alpine
    resources:
      requests:
        cpu: 100m
        memory: 128Mi
      limits:
        cpu: 500m
        memory: 512Mi
    storage:
      size: 1Gi
      storageClassName: standard
    # Optional: Custom Redis configuration
    # customConfig:
    #   maxmemory: "256mb"
    #   maxmemory-policy: "allkeys-lru"
    # Optional: Enable authentication
    # auth:
    #   secretName: redis-password

  sentinelConfig:
    replicas: 3
    quorum: 2
    downAfterMilliseconds: 5000
    failoverTimeout: 10000
    parallelSyncs: 1
    resources:
      requests:
        cpu: 50m
        memory: 64Mi
      limits:
        cpu: 200m
        memory: 128Mi

  serviceType: ClusterIP
